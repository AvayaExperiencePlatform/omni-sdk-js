<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@avaya/axp-client-sdk-core - v0.1.0 | AXP Client SDK</title><meta name="description" content="Documentation for AXP Client SDK"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">AXP Client SDK</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../index.html">AXP Client SDK</a></li><li><a href="_avaya_axp_client_sdk_core.html">@avaya/axp-client-sdk-core</a></li></ul><h1>Module @avaya/axp-client-sdk-core - v0.1.0</h1></div><section class="tsd-panel tsd-typography"><a id="md:axp-core" class="tsd-anchor"></a><h1><a href="#md:axp-core">AXP Core</a></h1><a id="md:overview" class="tsd-anchor"></a><h2><a href="#md:overview">Overview</a></h2><p>The AXP Core module provides a set of basic functionalities to initialize, shutdown the SDK, and get the default conversation of the end user. The AXP Core establishes the session with Avaya Experience Platform™ for the end user, manages the session inactivity, and participants involved in the conversation.</p>
<a id="md:installation" class="tsd-anchor"></a><h2><a href="#md:installation">Installation</a></h2><p>To install the AXP Core, download the <a href="https://github.com/AvayaExperiencePlatform/omni-sdk-js/blob/master/omni-sdk/avaya-axp-client-sdk-core-0.1.0.tgz">avaya-axp-client-sdk-core-0.1.0.tgz</a> in your project and run the following command:</p>
<pre><code class="language-bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">./avaya-axp-client-sdk-core-0.1.0.tgz</span>
</code><button>Copy</button></pre>
<p>AXP Core exports a set of types and classes. Out of all the exports, the class <code>AxpClientSdk</code> is the origin point of the AXP Core usage flow. It can be imported as follows:</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">AxpClientSdk</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@avaya/axp-client-sdk-core&#39;</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<a id="md:usage" class="tsd-anchor"></a><h2><a href="#md:usage">Usage</a></h2><a id="md:prerequisites" class="tsd-anchor"></a><h3><a href="#md:prerequisites">Prerequisites</a></h3><p>Before using the AXP Omni SDK refer to <a href="https://developers.avayacloud.com/avaya-experience-platform/docs/introduction#next-steps">this page</a> for a list of prerequisites.</p>
<a id="md:using-additional-functionalities" class="tsd-anchor"></a><h3><a href="#md:using-additional-functionalities">Using additional functionalities</a></h3><p>The <a href="#md:conversation">Conversation</a> of Core module is extended by other modules of AXP Omni SDK. This extensibility is achieved using the concept of <a href="https://www.typescriptlang.org/docs/handbook/mixins.html">Mixins</a>.</p>
<p>Each additional functionality exports a mixin which enhances the conversation object with its own set of properties and methods. For example, if you use AXP Messaging module, then the conversation object will have additional properties and methods to send and receive messages.</p>
<p>Please refer to the documentation of the additional functionality module that you are using to know more about the methods that it adds on the Conversation.</p>
<p>List of currently available additional functionalities:</p>
<ul>
<li><a href="/modules/_avaya_axp_client_sdk_messaging">AXP Messaging</a></li>
</ul>
<a id="md:how-to-use-the-additional-functionalities" class="tsd-anchor"></a><h4><a href="#md:how-to-use-the-additional-functionalities">How to use the additional functionalities</a></h4><p>To use the additional functionalities, the Client has to install the additional functionality module (refer to the installation instructions of each additional functionality module for more details).</p>
<p>Each additional functionality module exports a mixin function. The base conversation from AXP Core module can be enhanced by applying this mixin. This will come in handy when we add new functionalities in future releases.</p>
<p>Example of adding AXP Messaging functionality to the AXP Core Conversation:</p>
<pre><code class="language-ts"><span class="hl-5">// TS/JS</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">AxpClientSdk</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@avaya/axp-client-sdk-core&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">AxpMessagingConversation</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@avaya/axp-client-sdk-messaging&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">EnhancedConversationClass</span><span class="hl-1"> = </span><span class="hl-0">AxpMessagingConversation</span><span class="hl-1">();</span><br/><br/><span class="hl-5">// All arguments are not shown for brevity, refer to the Initialization section for the complete initialization example.</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">userSession</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">AxpClientSdk</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">(..., </span><span class="hl-4">EnhancedConversationClass</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:authentication" class="tsd-anchor"></a><h3><a href="#md:authentication">Authentication</a></h3><p>The AXP Client SDK uses JSON Web Tokens (JWT) for client authentication and requires a valid JWT to function. The JWT is obtained from your own backend web application that communicates with AXP&#39;s authentication API.</p>
<p>The SDK expects an implementation of the <code>JwtProvider</code> interface to be provided during <a href="#md:initialization">initialization</a>. The <code>JwtProvider</code> implementation must have two methods:</p>
<ol>
<li><code>onExpiryWarning</code>: This method is called when the JWT is about to expire. In the argument of this method, the remaining time in milliseconds before the JWT expires is provided.</li>
<li><code>onExpiry</code>: This method is called when the JWT has expired.</li>
</ol>
<p><strong>The consumers of SDK should call the <code>AxpClientSdk.setJwt()</code> to provide a new JWT to the SDK.</strong></p>
<p>JWT Provider example (in TypeScript):</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">JwtProvider</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@avaya/axp-client-sdk-core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-8">MyJwtProvider</span><span class="hl-1"> </span><span class="hl-6">implements</span><span class="hl-1"> </span><span class="hl-8">JwtProvider</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">onExpiryWarning</span><span class="hl-1">(</span><span class="hl-4">timeToExpiry</span><span class="hl-1">: </span><span class="hl-8">number</span><span class="hl-1">): </span><span class="hl-8">void</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">// ...</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-0">onExpiry</span><span class="hl-1">(): </span><span class="hl-8">void</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">// ...</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>JWT Provider example (in JavaScript):</p>
<pre><code class="language-js"><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-8">MyJwtProviderJS</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">onExpiryWarning</span><span class="hl-1">(</span><span class="hl-4">timeToExpiry</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-5">// ...</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-0">onExpiry</span><span class="hl-1">(): </span><span class="hl-8">void</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">// ...</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:initialization" class="tsd-anchor"></a><h3><a href="#md:initialization">Initialization</a></h3><p>Before any operation can be performed with the SDK, it must be initialized. The initialization process creates a new session for the current user (identified by the JWT) and returns a <code>UserSession</code> object that contains the Conversation object corresponding to the User&#39;s ongoing conversation. For more details see the <a href="#md:conversation">Conversation</a> section.</p>
<p>Initialization can be done by calling the static method <code>init()</code> on the class <code>AxpClientSdk</code>. The <code>init()</code> method takes two arguments:</p>
<ol>
<li><code>initParams</code>: An object which has all the initialization parameters and configurations.</li>
<li><code>AdditionalFunctionality</code>: A Conversation class enhanced by applying the <a href="#md:using-additional-functionalities">additional functionalities</a> using mixins.</li>
</ol>
<p>Initialization Example:</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">AxpClientSdk</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@avaya/axp-client-sdk-core&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">AxpMessagingConversation</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@avaya/axp-client-sdk-messaging&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">EnhancedConversationClass</span><span class="hl-1"> = </span><span class="hl-0">AxpMessagingConversation</span><span class="hl-1">();</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">initParams</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-4">host:</span><span class="hl-1"> </span><span class="hl-2">&#39;na&#39;</span><br/><span class="hl-1">    </span><span class="hl-4">integrationId</span><span class="hl-1">: </span><span class="hl-2">&#39;&lt;integrationId&gt;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">appKey:</span><span class="hl-1"> </span><span class="hl-2">&#39;&lt;appKey&gt;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">token:</span><span class="hl-1"> </span><span class="hl-2">&#39;&lt;JWT&gt;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">JwtProvider:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">MyJwtProvider</span><span class="hl-1">(),</span><br/><span class="hl-1">    </span><span class="hl-4">displayName:</span><span class="hl-1"> </span><span class="hl-2">&#39;John Doe&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">logLevel:</span><span class="hl-1"> </span><span class="hl-2">&#39;debug&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">idleTimeoutDuration:</span><span class="hl-1"> </span><span class="hl-9">5</span><span class="hl-1"> * </span><span class="hl-9">60</span><span class="hl-1"> * </span><span class="hl-9">1000</span><span class="hl-1">, </span><span class="hl-5">// in milliseconds</span><br/><span class="hl-1">    </span><span class="hl-4">idleShutdownGraceTimeoutDuration:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1"> * </span><span class="hl-9">60</span><span class="hl-1"> * </span><span class="hl-9">1000</span><span class="hl-1">, </span><span class="hl-5">// in milliseconds</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">userSession</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">AxpClientSdk</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">(</span><span class="hl-4">initParams</span><span class="hl-1">, </span><span class="hl-4">EnhancedConversationClass</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>The <code>init()</code> method returns a <code>Promise</code> that resolves to a <code>UserSession</code> object. The <code>UserSession</code> object contains the conversation object(s) that can be used for further operations.</p>
<a id="md:waiting-for-initialization-to-complete" class="tsd-anchor"></a><h4><a href="#md:waiting-for-initialization-to-complete">Waiting for initialization to complete</a></h4><p>Being an <code>async</code> method, the Client can <code>await</code> on the promise returned by the <code>init()</code> (as shown in above example) method to wait for the SDK initialization to complete.</p>
<p>Alternatively, the SDK emits an initialized event after the SDK initialization has completed. The Client can listen to these events by providing a listener function to SDK.</p>
<p><strong>Important: In order to receive the initialized event, it is imperative to provide the listener function before calling the <code>init()</code> method.</strong></p>
<pre><code class="language-ts"><span class="hl-4">AxpClientSdk</span><span class="hl-1">.</span><span class="hl-0">addSdkInitializedListener</span><span class="hl-1">((</span><span class="hl-4">userSession</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">// userSession object contains the conversation object that can be used for further operations. More details on the conversation object are below.</span><br/><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;SDK Initialized&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-5">// ... your code.</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:conversation" class="tsd-anchor"></a><h3><a href="#md:conversation">Conversation</a></h3><p>A conversation object represents the conversation of the current user with the Contact Center.</p>
<p>The AXP Core Conversation contains -</p>
<ul>
<li>Method to get the details of the participants involved in the conversation.</li>
<li>Method to provide listeners for the participant change events.</li>
<li>Method to  set the context parameters used for routing.</li>
<li>Property <code>conversationId</code>.</li>
</ul>
<p><strong>💡 INFO: Based on <a href="#md:using-additional-functionalities">additional functionality</a> that is included, the conversation will have additional properties and methods. Check out the documentation of each functionality that has been added to know more about the methods that it adds on to the Conversation.</strong></p>
<p><strong>❗ NOTE: On initialization, the default Conversation for the user gets automatically created on AXP. The default conversation of the user never ends and currently the only conversation that the user can use.</strong></p>
<p>The default conversation can be accessed from the <code>UserSession</code> object returned by the <code>init()</code> method.</p>
<pre><code class="language-ts"><span class="hl-5">// Arguments are not shown for brevity, refer to the Initialization section for the complete initialization example.</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">userSession</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">AxpClientSdk</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">(...);</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">conversation</span><span class="hl-1"> = </span><span class="hl-4">userSession</span><span class="hl-1">.</span><span class="hl-4">conversations</span><span class="hl-1">[</span><span class="hl-9">0</span><span class="hl-1">];</span>
</code><button>Copy</button></pre>
<p>Alternatively, the <code>AxpClientSdk</code> class exposes another method <code>getDefaultConversation()</code> which returns the default conversation object. Important thing to note here is that this method can be called only after the SDK has been initialized.</p>
<pre><code class="language-ts"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">userSession</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">AxpClientSdk</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">(...);</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">conversation</span><span class="hl-1"> = </span><span class="hl-4">AxpClientSdk</span><span class="hl-1">.</span><span class="hl-0">getDefaultConversation</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<a id="md:context-parameters" class="tsd-anchor"></a><h4><a href="#md:context-parameters">Context Parameters</a></h4><p>Context parameters are used to provide routing information to the AXP platform. These parameters are used to route the conversation to the appropriate agent or queue. The context parameters can be set using the <code>setContextParameters()</code> method on the conversation object.</p>
<pre><code class="language-ts"><span class="hl-4">conversation</span><span class="hl-1">.</span><span class="hl-0">setContextParameters</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-2">&#39;key1&#39;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-2">&#39;value1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">&#39;key2&#39;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-2">&#39;value2&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">// ...</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<a id="md:participants" class="tsd-anchor"></a><h4><a href="#md:participants">Participants</a></h4><p>The Client can get the list of participants involved in the conversation by using the property <code>participants</code> on the conversation object. The <code>participants</code> property is an array of <code>Participant</code> objects. Each <code>Participant</code> object contains that participant&#39;s details like id of the participant, their display name, their role and the channel on which they are participating in the conversation.</p>
<pre><code class="language-ts"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">participants</span><span class="hl-1"> = </span><span class="hl-4">conversation</span><span class="hl-1">.</span><span class="hl-4">participants</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<a id="md:events" class="tsd-anchor"></a><h4><a href="#md:events">Events</a></h4><p>Apart from the initialized and shutdown events, the SDK emits a few more events that the consumers can listen to. These events are specific to the Conversation and hence the APIs to listen to these events are provided on the Conversation object.</p>
<table>
<thead>
<tr>
<th>Event Name</th>
<th>Description</th>
<th>API to provide listener</th>
</tr>
</thead>
<tbody><tr>
<td>Participant Added</td>
<td>Emitted when a new participant is added to the conversation.</td>
<td><code>conversation.addParticipantAddedListener()</code></td>
</tr>
<tr>
<td>Participant Removed</td>
<td>Emitted when a participant is removed from the conversation.</td>
<td><code>conversation.addParticipantDisconnectedListener()</code></td>
</tr>
</tbody></table>
<p>The APIs to provide listeners returns a handlerId for that listener. This handleId can be used to remove the listener for that event.</p>
<pre><code class="language-ts"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">participantAddedHandlerId</span><span class="hl-1"> = </span><span class="hl-4">conversation</span><span class="hl-1">.</span><span class="hl-0">addParticipantAddedListener</span><span class="hl-1">((</span><span class="hl-4">participant</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Participant Added:&#39;</span><span class="hl-1">, </span><span class="hl-4">participant</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-5">// ... your code.</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// To remove the listener</span><br/><span class="hl-4">conversation</span><span class="hl-1">.</span><span class="hl-0">removeParticipantAddedListener</span><span class="hl-1">(</span><span class="hl-4">participantAddedHandlerId</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Similarly for Participant Removed event</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">participantDisconnectedHandlerId</span><span class="hl-1"> = </span><span class="hl-4">conversation</span><span class="hl-1">.</span><span class="hl-0">addParticipantDisconnectedListener</span><span class="hl-1">((</span><span class="hl-4">participant</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Participant Removed:&#39;</span><span class="hl-1">, </span><span class="hl-4">participant</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-5">// ... your code.</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// To remove the listener</span><br/><span class="hl-4">conversation</span><span class="hl-1">.</span><span class="hl-0">removeParticipantDisconnectedListener</span><span class="hl-1">(</span><span class="hl-4">participantDisconnectedHandlerId</span><span class="hl-1">);  </span>
</code><button>Copy</button></pre>
<a id="md:user-activity" class="tsd-anchor"></a><h3><a href="#md:user-activity">User Activity</a></h3><p>The SDK provides mechanism to automatically clear up the session if the User&#39;s session has not been active for the configured amount of time. The following sections explain what is considered as User Activity along with various timers and events that support this feature.</p>
<a id="md:timeouts" class="tsd-anchor"></a><h4><a href="#md:timeouts">Timeouts</a></h4><p>The AXP Core provides two timeouts to manage the session inactivity:</p>
<p>The first timer is the idle timer which is started right after the session is created. Any activity from the User or Client (mentioned below) resets this timer. This timer expires when there are no activities for the configured duration. Once this timer expires the SDK will emit the Idle Timeout event and provide the configured grace period duration in the event&#39;s payload. The Client can show an appropriate message on the UI, warning the User about inactivity, by handling this event.</p>
<p>The second timer is idle shutdown grace timer which runs after the idle timer has expired. This timer provides additional grace period for User or the Client to extend the session. After this timer expires, the session is terminated automatically and the SDK will raise the shutdown event and shut itself down (see <a href="#md:shutting-down-the-sdk">shutdown</a> section for more details). If the Client wants to continue it must be reinitialize the SDK to do so.</p>
<p>Both the timeout values can be configured during the initialization by providing their values in the init params object passed as the first argument to the <code>AxpClientSdk.init()</code> method.</p>
<pre><code class="language-ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">AxpClientSdk</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">// Other init params</span><br/><span class="hl-1">    </span><span class="hl-4">idleTimeoutDuration:</span><span class="hl-1"> </span><span class="hl-9">5</span><span class="hl-1"> * </span><span class="hl-9">60</span><span class="hl-1"> * </span><span class="hl-9">1000</span><span class="hl-1">, </span><span class="hl-5">// in milliseconds</span><br/><span class="hl-1">    </span><span class="hl-4">idleShutdownGraceTimeoutDuration:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1"> * </span><span class="hl-9">60</span><span class="hl-1"> * </span><span class="hl-9">1000</span><span class="hl-1">, </span><span class="hl-5">// in milliseconds</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<p>The Idle Timeout event can be listened to by providing a listener for the same.</p>
<pre><code class="language-ts"><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">warnUser</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">// Show warning on UI.</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handlerId</span><span class="hl-1"> = </span><span class="hl-4">AxpClientSdk</span><span class="hl-1">.</span><span class="hl-0">addIdleTimeOutInvokedListener</span><span class="hl-1">((</span><span class="hl-4">eventPayload</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">warnUser</span><span class="hl-1">(</span><span class="hl-2">&#39;You have been inactive for a while. Do you want to continue?&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// It can be removed by calling the removeIdleTimeoutListener method.</span><br/><span class="hl-4">AxpClientSdk</span><span class="hl-1">.</span><span class="hl-0">removeIdleTimeOutInvokedListener</span><span class="hl-1">(</span><span class="hl-4">handlerId</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:extending-the-session" class="tsd-anchor"></a><h4><a href="#md:extending-the-session">Extending the session</a></h4><p>The <code>AxpClientSdk</code> provides a method called <code>resetIdleTimeout()</code> which can be used to reset the idle timer or the grace timer. This method can be called whenever there is any activity from the User or the Client.</p>
<p>This method also helps the Client to extend the session in scenarios where the Client is aware that the User is active based on events from its UI.</p>
<p>Apart from this method, calling a subset of other methods provided by the Additional Functionalities is also considered as User activities. The list of methods that are considered as User Activity are provided in the documentation of the respective Additional Functionality.</p>
<p>The <code>resetIdleTimeout()</code> method only impacts the timers as opposed to calling methods of Additional Functionalities which also perform the operation that the method is supposed to do.</p>
<pre><code class="language-js"><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">showWarningBox</span><span class="hl-1">(</span><span class="hl-4">eventPayload</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">continueChatButton</span><span class="hl-1"> = </span><span class="hl-4">document</span><span class="hl-1">.</span><span class="hl-0">getElementById</span><span class="hl-1">(</span><span class="hl-2">&#39;inactivity-warning-continue-chat&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-4">continueChatButton</span><span class="hl-1">.</span><span class="hl-0">onclick</span><span class="hl-1"> = () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">AxpClientSdk</span><span class="hl-1">.</span><span class="hl-0">resetIdleTimeout</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-5">// ...</span><br/><span class="hl-1">    </span><span class="hl-0">setTimeout</span><span class="hl-1">(</span><span class="hl-4">hideWarningBox</span><span class="hl-1">, </span><span class="hl-4">eventPayload</span><span class="hl-1">.</span><span class="hl-4">gracePeriod</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">hideWarningBox</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-5">// ...</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:shutting-down-the-sdk" class="tsd-anchor"></a><h3><a href="#md:shutting-down-the-sdk">Shutting down the SDK</a></h3><p>The current user&#39;s session can be terminated by calling the <code>shutdown()</code> method of <code>AxpClientSdk</code>. This will end the session and cleanup all the corresponding  data within the SDK. <strong>Irrespective of the success or failure of the termination operation, the SDK cleanup will be performed.</strong></p>
<p>To shut down the SDK, call the <code>shutdown()</code> method on the <code>AxpClientSdk</code> class. The <code>shutdown()</code> method returns a <code>Promise</code> that resolves when the SDK has been successfully shut down.</p>
<pre><code class="language-typescript"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">AxpClientSdk</span><span class="hl-1">.</span><span class="hl-0">shutdown</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<blockquote>
<p><strong>! Important</strong></p>
<p>Once the SDK is shutdown the Conversation object(s) are also removed, hence the Client must re-initialize the SDK incase it wants to start again. However, this doesn&#39;t close the conversation of the User. Post re-initialization, the User can continue the conversation from where it was left.</p>
</blockquote>
<p>Similar to the initialization process, the SDK emits a shutdown event after the SDK has been successfully shut down. The consumers can listen to these events by providing a listener function to SDK.</p>
<pre><code class="language-ts"><span class="hl-4">AxpClientSdk</span><span class="hl-1">.</span><span class="hl-0">addSdkShutdownListener</span><span class="hl-1">(() </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;SDK Shutdown&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-5">// ... your cleanup code.</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
</section><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><h3 class="tsd-index-heading uppercase">Index</h3><section class="tsd-index-section"><h3 class="tsd-index-heading">Enumerations</h3><div class="tsd-index-list"><a href="../enums/_avaya_axp_client_sdk_core.LogLevel.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-8"></use></svg><span>Log<wbr/>Level</span></a>
<a href="../enums/_avaya_axp_client_sdk_core.ParticipantType.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-8"></use></svg><span>Participant<wbr/>Type</span></a>
<a href="../enums/_avaya_axp_client_sdk_core.ShutdownReason.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-8"></use></svg><span>Shutdown<wbr/>Reason</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Classes</h3><div class="tsd-index-list"><a href="../classes/_avaya_axp_client_sdk_core.AxpClientSdk.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-128"></use></svg><span>Axp<wbr/>Client<wbr/>Sdk</span></a>
<a href="../classes/_avaya_axp_client_sdk_core.AxpConversationCore.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-128"></use></svg><span>Axp<wbr/>Conversation<wbr/>Core</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Interfaces</h3><div class="tsd-index-list"><a href="../interfaces/_avaya_axp_client_sdk_core.AxpConversationCoreTrait.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Axp<wbr/>Conversation<wbr/>Core<wbr/>Trait</span></a>
<a href="../interfaces/_avaya_axp_client_sdk_core.EventPayload.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Event<wbr/>Payload</span></a>
<a href="../interfaces/_avaya_axp_client_sdk_core.IdleTimeout.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Idle<wbr/>Timeout</span></a>
<a href="../interfaces/_avaya_axp_client_sdk_core.JwtProvider.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Jwt<wbr/>Provider</span></a>
<a href="../interfaces/_avaya_axp_client_sdk_core.PageIterator.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Page<wbr/>Iterator</span></a>
<a href="../interfaces/_avaya_axp_client_sdk_core.ParticipantAdded.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Participant<wbr/>Added</span></a>
<a href="../interfaces/_avaya_axp_client_sdk_core.ParticipantDisconnected.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>Participant<wbr/>Disconnected</span></a>
<a href="../interfaces/_avaya_axp_client_sdk_core.SDKEvent.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>SDKEvent</span></a>
<a href="../interfaces/_avaya_axp_client_sdk_core.SDKShutdown.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-256"></use></svg><span>SDKShutdown</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Type Aliases</h3><div class="tsd-index-list"><a href="../types/_avaya_axp_client_sdk_core.AxpClientSdkInitParams.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Axp<wbr/>Client<wbr/>Sdk<wbr/>Init<wbr/>Params</span></a>
<a href="../types/_avaya_axp_client_sdk_core.AxpUserSession.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Axp<wbr/>User<wbr/>Session</span></a>
<a href="../types/_avaya_axp_client_sdk_core.EventHandler.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Event<wbr/>Handler</span></a>
<a href="../types/_avaya_axp_client_sdk_core.LoggerFactory.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Logger<wbr/>Factory</span></a>
<a href="../types/_avaya_axp_client_sdk_core.Participant.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2097152"></use></svg><span>Participant</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Variables</h3><div class="tsd-index-list"><a href="../variables/_avaya_axp_client_sdk_core.AxpRegionConstants.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-32"></use></svg><span>Axp<wbr/>Region<wbr/>Constants</span></a>
</div></section></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:axp-core"><span>AXP <wbr/>Core</span></a><ul><li><a href="#md:overview"><span>Overview</span></a></li><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:usage"><span>Usage</span></a></li><li><ul><li><a href="#md:prerequisites"><span>Prerequisites</span></a></li><li><a href="#md:using-additional-functionalities"><span>Using additional functionalities</span></a></li><li><ul><li><a href="#md:how-to-use-the-additional-functionalities"><span>How to use the additional functionalities</span></a></li></ul></li><li><a href="#md:authentication"><span>Authentication</span></a></li><li><a href="#md:initialization"><span>Initialization</span></a></li><li><ul><li><a href="#md:waiting-for-initialization-to-complete"><span>Waiting for initialization to complete</span></a></li></ul></li><li><a href="#md:conversation"><span>Conversation</span></a></li><li><ul><li><a href="#md:context-parameters"><span>Context <wbr/>Parameters</span></a></li><li><a href="#md:participants"><span>Participants</span></a></li><li><a href="#md:events"><span>Events</span></a></li></ul></li><li><a href="#md:user-activity"><span>User <wbr/>Activity</span></a></li><li><ul><li><a href="#md:timeouts"><span>Timeouts</span></a></li><li><a href="#md:extending-the-session"><span>Extending the session</span></a></li></ul></li><li><a href="#md:shutting-down-the-sdk"><span>Shutting down the SDK</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../index.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>AXP Client SDK</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><div class="overlay"></div></body></html>